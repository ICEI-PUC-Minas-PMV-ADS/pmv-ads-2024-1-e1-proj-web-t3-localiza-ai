<!DOCTYPE html>
<html dir="ltr" lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Modelo de painel de controle, inspirado no Framework Bootstrap">
    <meta name="robots" content="noindex,nofollow">
    <title>Localiza.Ai - Editar Serviços</title>
    <link rel="icon" type="image/png" sizes="16x16" href="../../assets/images/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/mdi.min.css">
    <link href="../../assets/libs/chartist/dist/chartist.min.css" rel="stylesheet">
    <link href="../../dist/css/style.min.css" rel="stylesheet">
    <style>
        .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
            color: #495057;
            background-color: #fff;
            border-color: #dee2e6 #dee2e6 #fff;
        }
        label {
            margin-left: 10px; /* Ajuste a margem conforme necessário */
        }
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .checkbox-container input {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div id="main-wrapper" data-navbarbg="skin6" data-theme="light" data-layout="vertical" data-sidebartype="full" data-boxed-layout="full">
        <header class="topbar" data-navbarbg="skin6">
            <nav class="navbar top-navbar navbar-expand-md navbar-light">
                <div class="navbar-header" data-logobg="skin5">
                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)">
                        <i class="ti-menu ti-close"></i>
                    </a>
                    <div class="navbar-brand">
                        <a href="index.html" class="logo">
                            <span class="logo-text">
                                <img src="../../assets/images/logo-text.png" alt="homepage" class="dark-logo" />
                                <img src="../../assets/images/logo-light-text.png" class="light-logo" alt="homepage" />
                            </span>
                        </a>
                    </div>
                </div>
                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin6">
                    <ul class="navbar-nav float-start me-auto">
                        <li class="nav-item search-box">
                            <a class="nav-link waves-effect waves-dark" href="javascript:void(0)">
                                <div class="d-flex align-items-center">
                                    <i class="mdi mdi-magnify font-20 me-1"></i>
                                    <div class="ms-1 d-none d-sm-block">
                                        <span>Pesquise aqui</span>
                                    </div>
                                </div>
                            </a>
                            <form class="app-search position-absolute">
                                <input type="text" class="form-control" placeholder="Digite serviços, orçamentos e muito mais">
                                <a class="srh-btn"><i class="ti-close"></i></a>
                            </form>
                        </li>
                    </ul>
                    <ul class="navbar-nav float-end">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-muted waves-effect waves-dark pro-pic" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="../../assets/images/users/1.jpg" alt="user" class="rounded-circle" width="40">
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end user-dd animated" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="javascript:void(0)"><i class="ti-user me-1 ms-1"></i> Status: Online</a>
                                <a class="dropdown-item" href="javascript:void(0)"><i class="ti-user me-1 ms-1"></i> Configurações de conta</a>
                                <a class="dropdown-item" href="javascript:void(0)"><i class="ti-user me-1 ms-1"></i> Feedback</a>
                                <a class="dropdown-item" href="javascript:void(0)"><i class="ti-user me-1 ms-1"></i> Logout</a>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <aside class="left-sidebar" data-sidebarbg="skin5">
            <div class="scroll-sidebar">
                <nav class="sidebar-nav">
                    <ul id="sidebarnav">
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="index.html">
                                <i class="mdi mdi-home"></i>
                                <span class="hide-menu">Página Inicial</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="inbox.html">
                                <i class="mdi mdi-android-messages"></i>
                                <span class="hide-menu">Inbox</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link active" href="servicos.html">
                                <i class="mdi mdi-window-shutter-settings"></i>
                                <span class="hide-menu">Serviços</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="orcamentos.html">
                                <i class="mdi mdi-currency-usd"></i>
                                <span class="hide-menu">Orçamentos</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="clientes.html">
                                <i class="mdi mdi-account-group-outline"></i>
                                <span class="hide-menu">Clientes</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="ajuda.html">
                                <i class="mdi mdi-account-question"></i>
                                <span class="hide-menu">Central de Ajuda</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="configuracoes.html">
                                <i class="mdi mdi-cog-outline"></i>
                                <span class="hide-menu">Configurações</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>
        <div class="page-wrapper">
            <div class="page-breadcrumb">
                <div class="row">
                    <div class="col-5 align-self-center">
                        <h4 class="page-title">Editar Serviços</h4>
                    </div>
                    <div class="col-7 align-self-center">
                        <div class="d-flex align-items-center justify-content-end">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="index.html">Página Inicial</a></li>
                                    <li class="breadcrumb-item"><a href="servicos.html">Serviços</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Editar Serviços</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Editar serviços</h4>
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="celulares-tab" data-bs-toggle="tab" href="#celulares" role="tab" aria-controls="celulares" aria-selected="true">Celulares e Smartphones</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="iphone-tab" data-bs-toggle="tab" href="#iphone" role="tab" aria-controls="iphone" aria-selected="false">iPhone</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="smartwatch-tab" data-bs-toggle="tab" href="#smartwatch" role="tab" aria-controls="smartwatch" aria-selected="false">Smartwatch</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="tablet-tab" data-bs-toggle="tab" href="#tablet" role="tab" aria-controls="tablet" aria-selected="false">Tablet & iPad</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="computadores-tab" data-bs-toggle="tab" href="#computadores" role="tab" aria-controls="computadores" aria-selected="false">Computadores e Notebooks</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="perifericos-tab" data-bs-toggle="tab" href="#perifericos" role="tab" aria-controls="perifericos" aria-selected="false">Periféricos</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="celulares" role="tabpanel" aria-labelledby="celulares-tab">
                                <div class="p-4">
                                    <!-- Conteúdo da aba Celulares e Smartphones -->
                                    <div class="checkbox-container"><input type="checkbox" id="service1"><label for="service1">Conserto de celular que não liga</label></div>
                                    <div id="celulares-content"></div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="iphone" role="tabpanel" aria-labelledby="iphone-tab">
                                <div class="p-4">
                                    <!-- Conteúdo da aba iPhone -->
                                    <div class="checkbox-container"><input type="checkbox" id="service29"><label for="service29">Conserto de iPhone que não liga</label></div>
                                    <div id="iphone-content"></div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="smartwatch" role="tabpanel" aria-labelledby="smartwatch-tab">
                                <div class="p-4">
                                    <!-- Conteúdo da aba Smartwatch -->
                                    <div class="checkbox-container"><input type="checkbox" id="service55"><label for="service55">Conserto de smartwatch que não liga</label></div>
                                    <div id="smartwatch-content"></div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tablet" role="tabpanel" aria-labelledby="tablet-tab">
                                <div class="p-4">
                                    <!-- Conteúdo da aba Tablet & iPad -->
                                    <div class="checkbox-container"><input type="checkbox" id="service67"><label for="service67">Conserto de tablet/iPad que não liga</label></div>
                                    <div id="tablet-content"></div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="computadores" role="tabpanel" aria-labelledby="computadores-tab">
                                <div class="p-4">
                                    <!-- Conteúdo da aba Computadores e Notebooks -->
                                    <div class="checkbox-container"><input type="checkbox" id="service102"><label for="service102">Conserto de computador/notebook</label></div>
                                    <div id="computadores-content"></div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="perifericos" role="tabpanel" aria-labelledby="perifericos-tab">
                                <div class="p-4">
                                    <!-- Conteúdo da aba Periféricos -->
                                    <div class="checkbox-container"><input type="checkbox" id="service87"><label for="service87">Substituição de cabos danificados (fone de ouvido)</label></div>
                                    <div id="perifericos-content"></div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end mt-3">
                            <button id="createServiceBtn" class="btn btn-primary">Criar Novo Serviço</button>
                            <button id="editServiceBtn" class="btn btn-secondary ms-2">Editar Serviço</button>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer text-center">
                Todos os direitos reservados a Equipe 2 (Alanis, Felipe, Lucas e Tais). Projetado e desenvolvido por
                <a href="https://github.com/ICEI-PUC-Minas-PMV-ADS/pmv-ads-2024-1-e1-proj-web-t3-localiza-ai">Localiza.Ai (Github)</a>.
            </footer>
        </div>
    </div>
    <script src="../../assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="../../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/extra-libs/sparkline/sparkline.js"></script>
    <script src="../../dist/js/waves.js"></script>
    <script src="../../dist/js/sidebarmenu.js"></script>
    <script src="../../dist/js/custom.min.js"></script>
    <script>
        // Inicializar serviços padrão
        const defaultServices = {
            celulares: ["Conserto de celular que não liga"],
            iphone: ["Conserto de iPhone que não liga"],
            smartwatch: ["Conserto de smartwatch que não liga"],
            tablet: ["Conserto de tablet/iPad que não liga"],
            computadores: ["Conserto de computador/notebook"],
            perifericos: ["Substituição de cabos danificados (fone de ouvido)"]
        };

        function initializeServices() {
            Object.keys(defaultServices).forEach(tab => {
                const services = JSON.parse(localStorage.getItem(tab) || '[]');
                const updatedServices = [...new Set([...services, ...defaultServices[tab]])];
                localStorage.setItem(tab, JSON.stringify(updatedServices));
            });
        }

        // Carregar serviços do localStorage
        function loadServices() {
            const tabs = ['celulares', 'iphone', 'smartwatch', 'tablet', 'computadores', 'perifericos'];
            tabs.forEach(tab => {
                const services = JSON.parse(localStorage.getItem(tab) || '[]');
                const contentDiv = document.getElementById(`${tab}-content`);
                contentDiv.innerHTML = ''; // Limpar conteúdo existente
                services.forEach(service => {
                    const newServiceHtml = `<div class="checkbox-container"><input type="checkbox" id="${service.replace(/\s+/g, '-').toLowerCase()}"><label for="${service.replace(/\s+/g, '-').toLowerCase()}">${service}</label></div>`;
                    contentDiv.insertAdjacentHTML('beforeend', newServiceHtml);
                });
            });
        }

        // Salvar serviço no localStorage
        function saveService() {
            const serviceName = document.getElementById('serviceName').value.trim();
            if (serviceName) {
                const activeTab = document.querySelector('.tab-pane.active');
                const tabId = activeTab.id.split('-')[0];
                const services = JSON.parse(localStorage.getItem(tabId) || '[]');
                if (services.includes(serviceName)) {
                    alert('O serviço já existe.');
                    return;
                }
                services.push(serviceName);
                localStorage.setItem(tabId, JSON.stringify(services));
                const contentDiv = activeTab.querySelector('div[id$="-content"]');
                const newServiceHtml = `<div class="checkbox-container"><input type="checkbox" id="${serviceName.replace(/\s+/g, '-').toLowerCase()}"><label for="${serviceName.replace(/\s+/g, '-').toLowerCase()}">${serviceName}</label></div>`;
                contentDiv.insertAdjacentHTML('beforeend', newServiceHtml);
                console.log('Serviço salvo:', serviceName);
                alert('Serviço salvo com sucesso!');
                const createServiceModal = bootstrap.Modal.getInstance(document.getElementById('createServiceModal'));
                createServiceModal.hide();
            } else {
                alert('Por favor, insira um nome para o serviço.');
            }
        }

        // Apagar serviço do localStorage
        function deleteService() {
            const serviceNameToDelete = document.getElementById('editServiceName').value.trim().toLowerCase();
            if (serviceNameToDelete) {
                const activeTab = document.querySelector('.tab-pane.active');
                const tabId = activeTab.id.split('-')[0];
                const services = JSON.parse(localStorage.getItem(tabId) || '[]');
                const serviceIndex = services.findIndex(service => service.toLowerCase() === serviceNameToDelete);
                if (serviceIndex !== -1) {
                    services.splice(serviceIndex, 1);
                    localStorage.setItem(tabId, JSON.stringify(services));
                    const contentDiv = activeTab.querySelector('div[id$="-content"]');
                    const serviceElement = contentDiv.querySelector(`label[for="${serviceNameToDelete.replace(/\s+/g, '-')}"]`).parentElement;
                    contentDiv.removeChild(serviceElement);
                    console.log('Serviço apagado:', serviceNameToDelete);
                    alert('Serviço apagado com sucesso!');
                } else {
                    alert('Serviço não encontrado.');
                }
                const editServiceModal = bootstrap.Modal.getInstance(document.getElementById('editServiceModal'));
                editServiceModal.hide();
            } else {
                alert('Por favor, insira o nome do serviço para apagar.');
            }
        }

        // Função para abrir o modal de criação de novo serviço
        function openCreateServiceModal() {
            const modalHtml = `
                <div class="modal fade" id="createServiceModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Nova Grife</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="serviceName" class="form-label">Nome da Grife</label>
                                    <input type="text" class="form-control" id="serviceName">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Voltar</button>
                                <button type="button" class="btn btn-primary" onclick="saveService()">Salvar</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const createServiceModal = new bootstrap.Modal(document.getElementById('createServiceModal'));
            createServiceModal.show();
        }

        // Função para abrir o modal de edição de serviço
        function openEditServiceModal() {
            const modalHtml = `
                <div class="modal fade" id="editServiceModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Editar Serviço</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="editServiceName" class="form-label">Nome do Serviço a Apagar</label>
                                    <input type="text" class="form-control" id="editServiceName">
                                </div>
                                <button type="button" class="btn btn-danger" onclick="deleteService()">Apagar Serviço</button>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Voltar</button>
                                <button type="button" class="btn btn-primary" onclick="updateService()">Salvar Alterações</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const editServiceModal = new bootstrap.Modal(document.getElementById('editServiceModal'));
            editServiceModal.show();
        }

        // Função para atualizar o serviço (aqui você pode adicionar a lógica para atualizar o serviço)
        function updateService() {
            const newServiceName = document.getElementById('editServiceName').value.trim();
            if (newServiceName) {
                console.log('Serviço atualizado para:', newServiceName); // Substitua isso pela lógica real de atualização
                alert('Serviço atualizado com sucesso!');
                const editServiceModal = bootstrap.Modal.getInstance(document.getElementById('editServiceModal'));
                editServiceModal.hide();
            } else {
                alert('Por favor, insira um novo nome para o serviço.');
            }
        }

        // Inicializar e carregar os serviços ao carregar a página
        document.addEventListener('DOMContentLoaded', () => {
            initializeServices();
            loadServices();
        });

        // Event listeners para os botões
        document.getElementById('createServiceBtn').addEventListener('click', openCreateServiceModal);
        document.getElementById('editServiceBtn').addEventListener('click', openEditServiceModal);
    </script>
</body>
</html>
